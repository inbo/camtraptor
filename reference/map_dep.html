<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Visualize deployments features — map_dep • camtraptor</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Visualize deployments features — map_dep"><meta name="description" content="This function visualizes deployments features such as number of detected
species, number of observations and RAI on a dynamic map.
The circle size and colour are proportional to the mapped feature.
Deployments without observations are shown as gray circles and a message is
returned."><meta property="og:description" content="This function visualizes deployments features such as number of detected
species, number of observations and RAI on a dynamic map.
The circle size and colour are proportional to the mapped feature.
Deployments without observations are shown as gray circles and a message is
returned."><meta property="og:image" content="https://inbo.github.io/camtraptor/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">camtraptor</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.26.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/camera-operation-matrix.html">Camera operation matrix</a></li>
    <li><a class="dropdown-item" href="../articles/filter-predicates.html">Filter predicates</a></li>
    <li><a class="dropdown-item" href="../articles/record-table.html">Record table</a></li>
    <li><a class="dropdown-item" href="../articles/visualize-deployment-features.html">Visualize deployment features</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/inbo/camtraptor/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Visualize deployments features</h1>
      <small class="dont-index">Source: <a href="https://github.com/inbo/camtraptor/blob/main/R/map_dep.R" class="external-link"><code>R/map_dep.R</code></a></small>
      <div class="d-none name"><code>map_dep.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function visualizes deployments features such as number of detected
species, number of observations and RAI on a dynamic map.
The circle size and colour are proportional to the mapped feature.
Deployments without observations are shown as gray circles and a message is
returned.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">map_dep</span><span class="op">(</span></span>
<span>  package <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">feature</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  species <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sex <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  life_stage <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  effort_unit <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cluster <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  hover_columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n"</span>, <span class="st">"species"</span>, <span class="st">"deploymentID"</span>, <span class="st">"locationID"</span>, <span class="st">"locationName"</span>,</span>
<span>    <span class="st">"latitude"</span>, <span class="st">"longitude"</span>, <span class="st">"start"</span>, <span class="st">"end"</span><span class="op">)</span>,</span>
<span>  palette <span class="op">=</span> <span class="st">"inferno"</span>,</span>
<span>  zero_values_show <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  zero_values_icon_url <span class="op">=</span> <span class="st">"https://img.icons8.com/ios-glyphs/30/000000/multiply.png"</span>,</span>
<span>  zero_values_icon_size <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  na_values_show <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na_values_icon_url <span class="op">=</span> <span class="st">"https://img.icons8.com/ios-glyphs/30/FA5252/multiply.png"</span>,</span>
<span>  na_values_icon_size <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  relative_scale <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  max_scale <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  radius_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">50</span><span class="op">)</span>,</span>
<span>  datapkg <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-package">package<a class="anchor" aria-label="anchor" href="#arg-package"></a></dt>
<dd><p>Camera trap data package object, as returned by
<code><a href="read_camtrap_dp.html">read_camtrap_dp()</a></code>.</p></dd>


<dt id="arg-feature">feature<a class="anchor" aria-label="anchor" href="#arg-feature"></a></dt>
<dd><p>Deployment feature to visualize.
One of:</p><ul><li><p><code>n_species</code>: Number of identified species.</p></li>
<li><p><code>n_obs</code>: Number of observations.</p></li>
<li><p><code>n_individuals</code>: Number of individuals.</p></li>
<li><p><code>rai</code>: Relative Abundance Index.</p></li>
<li><p><code>rai_individuals</code>: Relative Abundance Index based on number of individuals.</p></li>
<li><p><code>effort</code>: Effort (duration) of the deployment.</p></li>
</ul></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Filter predicates for subsetting deployments.</p></dd>


<dt id="arg-species">species<a class="anchor" aria-label="anchor" href="#arg-species"></a></dt>
<dd><p>Character with a scientific name.
Required for <code>rai</code>, optional for <code>n_obs</code>.
Default: <code>NULL</code>.</p></dd>


<dt id="arg-sex">sex<a class="anchor" aria-label="anchor" href="#arg-sex"></a></dt>
<dd><p>Character defining the sex class to filter on, e.g. <code>"female"</code>.
If <code>NULL</code> (default) all observations of all sex classes are taken into
account.
Optional parameter for <code>n_obs</code> and <code>n_individuals</code>.</p></dd>


<dt id="arg-life-stage">life_stage<a class="anchor" aria-label="anchor" href="#arg-life-stage"></a></dt>
<dd><p>Character vector defining the life stage class to filter
on, e.g. <code>"adult"</code> or <code>c("subadult", "adult")</code>.
If <code>NULL</code> (default) all observations of all life stage classes are taken
into account.
Optional parameter for <code>n_obs</code> and <code>n_individuals</code>.</p></dd>


<dt id="arg-effort-unit">effort_unit<a class="anchor" aria-label="anchor" href="#arg-effort-unit"></a></dt>
<dd><p>Time unit to use while visualizing deployment effort
(duration).
One of:</p><ul><li><p><code>second</code></p></li>
<li><p><code>minute</code></p></li>
<li><p><code>hour</code></p></li>
<li><p><code>day</code></p></li>
<li><p><code>month</code></p></li>
<li><p><code>year</code>
If  <code>NULL</code> (default), the effort is returned in hours.</p></li>
</ul></dd>


<dt id="arg-cluster">cluster<a class="anchor" aria-label="anchor" href="#arg-cluster"></a></dt>
<dd><p>Logical value indicating whether using the cluster option
while visualizing maps.
Default: <code>TRUE</code>.</p></dd>


<dt id="arg-hover-columns">hover_columns<a class="anchor" aria-label="anchor" href="#arg-hover-columns"></a></dt>
<dd><p>Character vector with the name of the columns to use for
showing location deployment information on mouse hover.
One or more from deployment columns.
Use <code>NULL</code> to disable hovering.
Default information:</p><ul><li><p><code>n</code>: Number of species, number of observations, RAI or effort (column
created internally by a <code>get_*()</code> function).</p></li>
<li><p><code>species</code>: Species name(s).</p></li>
<li><p><code>start</code>: Start deployment.</p></li>
<li><p><code>end</code>: End deployment.</p></li>
<li><p><code>deploymentID</code>: Deployment unique identifier.</p></li>
<li><p><code>locationID</code>: Location unique identifier.</p></li>
<li><p><code>locationName</code>: Location name.</p></li>
<li><p><code>latitude</code></p></li>
<li><p><code>longitude</code></p></li>
</ul><p>See the <a href="https://camtrap-dp.tdwg.org/data/#deployments" class="external-link">Deployment</a>
section of Camtrap DP for the full list of columns you can use.</p></dd>


<dt id="arg-palette">palette<a class="anchor" aria-label="anchor" href="#arg-palette"></a></dt>
<dd><p>The palette name or the colour function that values will be
mapped to.
Typically one of the following:</p><ul><li><p>A character vector of RGB or named colours. Examples: <code>c("#000000",   "#0000FF", "#FFFFFF"))</code>,<code>topo.colors(10))</code>.</p></li>
<li><p>The full name of a RColorBrewer palette, e.g. "BuPu" or "Greens", or
viridis palette: <code>"viridis"</code>, <code>"magma"</code>, <code>"inferno"</code> or <code>"plasma"</code>.
For more options, see parameter <code>palette</code> of <code><a href="https://rstudio.github.io/leaflet/reference/colorNumeric.html" class="external-link">leaflet::colorNumeric()</a></code>.</p></li>
</ul></dd>


<dt id="arg-zero-values-show">zero_values_show<a class="anchor" aria-label="anchor" href="#arg-zero-values-show"></a></dt>
<dd><p>Logical indicating whether to show deployments with
zero values.
Default: <code>TRUE</code>.</p></dd>


<dt id="arg-zero-values-icon-url">zero_values_icon_url<a class="anchor" aria-label="anchor" href="#arg-zero-values-icon-url"></a></dt>
<dd><p>Character with URL to icon for showing
deployments with zero values.
Default: a cross (multiply symbol)
<code>"https://img.icons8.com/ios-glyphs/30/000000/multiply.png"</code>.</p></dd>


<dt id="arg-zero-values-icon-size">zero_values_icon_size<a class="anchor" aria-label="anchor" href="#arg-zero-values-icon-size"></a></dt>
<dd><p>A number to set the size of the icon to show
deployments with zero values.
Default: 10.</p></dd>


<dt id="arg-na-values-show">na_values_show<a class="anchor" aria-label="anchor" href="#arg-na-values-show"></a></dt>
<dd><p>Logical indicating whether to show deployments with
zero values. Notice that only feature <code>"n_species"</code>
generates NA values.
Default: <code>TRUE</code>.</p></dd>


<dt id="arg-na-values-icon-url">na_values_icon_url<a class="anchor" aria-label="anchor" href="#arg-na-values-icon-url"></a></dt>
<dd><p>Character with URL to icon for showing
deployments with <code>NA</code> values. Notice that only feature <code>"n_species"</code>
generates NA values.
Default: a red cross (multiply symbol)
<code>"https://img.icons8.com/ios-glyphs/30/FA5252/multiply.png"</code>.</p></dd>


<dt id="arg-na-values-icon-size">na_values_icon_size<a class="anchor" aria-label="anchor" href="#arg-na-values-icon-size"></a></dt>
<dd><p>A number to set the size of the icon to show
deployments with <code>NA</code> values. Notice that only feature <code>"n_species"</code>
generates NA values.
Default: 10.</p></dd>


<dt id="arg-relative-scale">relative_scale<a class="anchor" aria-label="anchor" href="#arg-relative-scale"></a></dt>
<dd><p>Logical indicating whether to use a relative colour
and radius scale (<code>TRUE</code>) or an absolute scale (<code>FALSE</code>).
If absolute scale is used, specify a valid <code>max_scale</code>.</p></dd>


<dt id="arg-max-scale">max_scale<a class="anchor" aria-label="anchor" href="#arg-max-scale"></a></dt>
<dd><p>Number indicating the max value used to map colour
and radius.</p></dd>


<dt id="arg-radius-range">radius_range<a class="anchor" aria-label="anchor" href="#arg-radius-range"></a></dt>
<dd><p>Vector of length 2 containing the lower and upper limit
of the circle radius.
The lower value is used for deployments with zero feature value, i.e. no
observations, no identified species, zero RAI or zero effort.
The upper value is used for the deployment(s) with the highest feature
value (<code>relative_scale</code> = <code>TRUE</code>) or <code>max_scale</code> (<code>relative_scale</code>
= <code>FALSE</code>).
Default: <code>c(10, 50)</code>.</p></dd>


<dt id="arg-datapkg">datapkg<a class="anchor" aria-label="anchor" href="#arg-datapkg"></a></dt>
<dd><p>Deprecated.
Use <code>package</code> instead.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Leaflet map.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Check documentation about filter predicates: <code><a href="filter_predicate.html">pred()</a></code>, <code><a href="filter_predicate.html">pred_in()</a></code>,
<code><a href="filter_predicate.html">pred_and()</a></code>, ...</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Show number of species</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_species"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show number of observations (observations of unidentified species included</span></span></span>
<span class="r-in"><span><span class="co"># if any)</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_obs"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show number of observations of Anas platyrhynchos</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_obs"</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"Anas platyrhynchos"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show number of observations of subadult individuals of Anas strepera</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_obs"</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"Anas strepera"</span>,</span></span>
<span class="r-in"><span>  life_stage <span class="op">=</span> <span class="st">"subadult"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show number of observations of female or unknown individuals of gadwall</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_obs"</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"gadwall"</span>,</span></span>
<span class="r-in"><span>  sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"female"</span>, <span class="st">"unknown"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show number of individuals (individuals of unidentified species included if</span></span></span>
<span class="r-in"><span><span class="co"># any)</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_individuals"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Same filters by life stage and sex as for number of observations apply</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_individuals"</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"Anas strepera"</span>,</span></span>
<span class="r-in"><span>  sex <span class="op">=</span> <span class="st">"female"</span>,</span></span>
<span class="r-in"><span>  life_stage <span class="op">=</span> <span class="st">"adult"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show RAI</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"rai"</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"Anas strepera"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Same filters by life_stage and sex as for number of observations apply</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"rai"</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"Anas strepera"</span>,</span></span>
<span class="r-in"><span>  sex <span class="op">=</span> <span class="st">"female"</span>,</span></span>
<span class="r-in"><span>  life_stage <span class="op">=</span> <span class="st">"adult"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show RAI calculated by using number of detected individuals</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"rai_individuals"</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"Anas strepera"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Same filters by life stage and sex as for basic RAI apply</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"rai_individuals"</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"Anas strepera"</span>,</span></span>
<span class="r-in"><span>  sex <span class="op">=</span> <span class="st">"female"</span>,</span></span>
<span class="r-in"><span>  life_stage <span class="op">=</span> <span class="st">"adult"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show effort (hours)</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"effort"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Show effort (days)</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"effort"</span>,</span></span>
<span class="r-in"><span>  effort_unit <span class="op">=</span> <span class="st">"day"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use viridis palette (viridis palettes)</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_obs"</span>,</span></span>
<span class="r-in"><span>  palette <span class="op">=</span> <span class="st">"viridis"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use "BuPu" colour palette (RColorBrewer palettes)</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_obs"</span>,</span></span>
<span class="r-in"><span>  palette <span class="op">=</span> <span class="st">"BuPu"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use a palette defined by colour names</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_obs"</span>,</span></span>
<span class="r-in"><span>  palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"blue"</span>, <span class="st">"white"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use a palette defined by hex colours</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_obs"</span>,</span></span>
<span class="r-in"><span>  palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#000000"</span>, <span class="st">"#0000FF"</span>, <span class="st">"#FFFFFF"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Do not show deployments with zero values</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_obs"</span>,</span></span>
<span class="r-in"><span>  life_stage <span class="op">=</span> <span class="st">"subadult"</span>,</span></span>
<span class="r-in"><span>  zero_values_show <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use same icon but but a non default colour for zero values deployments,</span></span></span>
<span class="r-in"><span><span class="co"># e.g. red (hex: E74C3C)</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_obs"</span>,</span></span>
<span class="r-in"><span>  life_stage <span class="op">=</span> <span class="st">"subadult"</span>,</span></span>
<span class="r-in"><span>  zero_values_icon_url <span class="op">=</span> <span class="st">"https://img.icons8.com/ios-glyphs/30/E74C3C/multiply.png"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ... or yellow (F1C40F)</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_obs"</span>,</span></span>
<span class="r-in"><span>  life_stage <span class="op">=</span> <span class="st">"subadult"</span>,</span></span>
<span class="r-in"><span>  zero_values_icon_url <span class="op">=</span> <span class="st">"https://img.icons8.com/ios-glyphs/30/F1C40F/multiply.png"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use another icon via a different URL, e.g. the character Fry from Futurama</span></span></span>
<span class="r-in"><span><span class="co"># in green (2ECC71)</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_obs"</span>,</span></span>
<span class="r-in"><span>  life_stage <span class="op">=</span> <span class="st">"subadult"</span>,</span></span>
<span class="r-in"><span>  zero_values_icon_url <span class="op">=</span> <span class="st">"https://img.icons8.com/ios-glyphs/30/2ECC71/futurama-fry.png"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Same behavior for the icon visualizing NA values (`"n_species"` feature)</span></span></span>
<span class="r-in"><span><span class="va">unknown_species_vs_no_obs</span> <span class="op">&lt;-</span> <span class="va">mica</span></span></span>
<span class="r-in"><span><span class="va">unknown_species_vs_no_obs</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">observations</span> <span class="op">&lt;-</span> </span></span>
<span class="r-in"><span>  <span class="va">unknown_species_vs_no_obs</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">observations</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span></span>
<span class="r-in"><span>  <span class="co"># a deployment has detected only unknown species</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">.data</span><span class="op">$</span><span class="va">scientificName</span><span class="op">)</span> <span class="op">|</span> </span></span>
<span class="r-in"><span>           <span class="va">.data</span><span class="op">$</span><span class="va">scientificName</span> <span class="op">!=</span> <span class="st">"Homo sapiens"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="co"># a deployment has no observations</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">deploymentID</span> <span class="op">!=</span> <span class="st">"62c200a9-0e03-4495-bcd8-032944f6f5a1"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># create new map</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">unknown_species_vs_no_obs</span>,</span></span>
<span class="r-in"><span>  feature <span class="op">=</span> <span class="st">"n_species"</span>,</span></span>
<span class="r-in"><span>  zero_values_icon_url <span class="op">=</span> <span class="st">"https://img.icons8.com/ios-glyphs/30/2ECC71/futurama-fry.png"</span>,</span></span>
<span class="r-in"><span>  zero_values_icon_size <span class="op">=</span> <span class="fl">60</span>,</span></span>
<span class="r-in"><span>  na_values_icon_url <span class="op">=</span> <span class="st">"https://img.icons8.com/ios-glyphs/30/E74C3C/futurama-fry.png"</span>,</span></span>
<span class="r-in"><span>  na_values_icon_size <span class="op">=</span> <span class="fl">60</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set size of the icon for zero values deployments</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_obs"</span>,</span></span>
<span class="r-in"><span>  life_stage <span class="op">=</span> <span class="st">"subadult"</span>,</span></span>
<span class="r-in"><span>  zero_values_icon_size <span class="op">=</span> <span class="fl">30</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Disable cluster</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_species"</span>,</span></span>
<span class="r-in"><span>  cluster <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show only number of observations and location name while hovering</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_obs"</span>,</span></span>
<span class="r-in"><span>  hover_columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"locationName"</span>, <span class="st">"n"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use absolute scale for colours and radius</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span><span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_species"</span>,</span></span>
<span class="r-in"><span>  relative_scale <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  max_scale <span class="op">=</span> <span class="fl">4</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Change max and min size circles</span></span></span>
<span class="r-in"><span><span class="fu">map_dep</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mica</span>,</span></span>
<span class="r-in"><span>  <span class="st">"n_obs"</span>,</span></span>
<span class="r-in"><span>  radius_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">150</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Damiano Oldoni, Peter Desmet, Pieter Huybrechts, Research Foundation - Flanders.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

